---
layout: article
category: feds
type: web
title: jenkins配置
description: 
    jenkins是CI，可持续化构建工具，可以将类似gulp这样的自动化构建再自动化，它能做的不止于此。
---

## 大致流程

1.首先需要一台远程服务器。  
2.将jenkins软件安装到上面。  
3.给团队人员分配账号和权限。  

## Job
1.站在前端的角度，我理解的Job是一个完整的工作流程。安装有jenkins的服务器从类似gitlab，github等源代码管理处拉取源代码，然后执行我们平常的构建命令，如gulp *, webpack *， grunt *等，然后执行当前代码和线上代码比对，生成差异的.zip文件,然后再由对应开发人员通过运维系统发布，自从执行了构建，这个流程除了发布其他全交给远程服务器来完成。但前提是你开发完成并提交代码到远程分支上了。  
2.对于一个项目流程不同的开发人员可以建自己的job，但是应该都是一样的，所以一般是只建一个Job,不然就没意义了。

## 配置

一般需要的配置：

1.gitlab地址以及分支：该远程服务器拉取代码的地址，每次构建都会拉取。  
2.参数化构建过程：分支名，项目名称；参数化构建一般通过一段url地址来配置，不同的开发人员配置自己的url地址，然后jenkins构建的时候按参数来执行命令。  
3.构建触发器： 一个构建的时机。  
4.nodejsinstallation一般再刚开始配置的时候，远程服务器上的环境是干净的，需要安装一些npm包。
5.构建executewindows：构建要执行的命令，方便的是可以通过npm命令安装cnpm，然后安装其他包。本质上就是远程服务器执行了这里设置的命令。  
6.构建后操作：一般是执行线上和构建结果的比对，生成差异文件，然后通过设置的邮箱发送到开发人员那里。  
7.开发人员通过运维系统发布。  

### 总结

当新建一个Job的时候，服务器总是干净的，需要安装一些配置，有些是在安装jenkins软件时的基础插件如nodejs等，这个由运维来做。还有一些是开发人员需要安装的，如打包时用到的npm包，这要通过不断的模拟本地构建流程，通过设置构建命令发现未安装的包，然后再通过设置安装命令安装，这个过程比较繁琐。


